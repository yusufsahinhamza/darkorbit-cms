function redirect(e,t,s){if(!e)return!1;t&&void 0===s?window.open(e,"_blank"):void 0!==s?window.open(e,s):window.open(e,"_self")}function redirectToExternalHome(){redirect("/index.es?action=externalHome&loginError=99")}function openShopCategory(e){redirect("/indexInternal.es?action=internalDock&category="+e)}function redirectToEquipment(){redirect("/indexInternal.es?action=internalDock&tpl=internalDockEquipment")}function redirectToItemUpgradeSystem(){redirect("/indexInternal.es?action=internalItemUpgradeSystem")}function translate(e){return e}"undefined"==typeof console&&(window.console={log:function(){}});var browserType="unknown";function domGet(e){return"string"!=typeof e?e:document.getElementById(e)}function domGetChild(e,t){for(var s=0;s<e.childNodes.length;s++){var a=e.childNodes[s];if(1==a.nodeType){if(a.id==t)return a;var i=domGetChild(a,t);if(0!=i)return i}}return!1}function domGetBody(){return document.getElementsByTagName("BODY")[0]}function domGetOffset(e){var t={x:0,y:0};if((e=domGet(e)).offsetX)return{x:e.offsetX,y:e.offsetY};for(;e;)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t}function domFireEvent(obj,name){"ns"==browserType?"function"==typeof obj[name]?obj[name]():obj.getAttribute(name)&&eval(obj.getAttribute(name)):obj.fireEvent(name,window.event)}function domAttachEvent(e,t,s){"ns"==browserType?e.addEventListener(t.slice(2),s,!1):e.attachEvent(t,s)}function domDetachEvent(e,t,s){"ns"==browserType?e.removeEventListener(t.slice(2),s,!1):e.removeEvent(t,s)}function domOnLoad(e){domAttachEvent(window,"onload",e)}function domEventGetCoords(){return window.event?{x:window.event.clientX,y:window.event.clientY}:{x:window.nsevent.pageX,y:window.nsevent.pageY}}function domEventGetTarget(){return window.event?window.event.srcElement:window.nsevent.target}function domEventPreventDefault(){window.event?window.event.returnValue=!1:window.nsevent.preventDefault()}function domEventCancelBubble(){window.event?window.event.cancelBubble=!0:window.nsevent.stopPropagation()}function domGetParent(e,t){if(t)for(;e&&e.tagName&&e.tagName.toLowerCase()!=t.toLowerCase();)e=e.parentNode;else for(;e&&e.nodeType&&1!=e.nodeType;)e=e.parentNode;return e}function domGetPrevious(e,t){for(e=domGet(e);;){if(1==e.nodeType)if("object"==typeof t){for(var s=0;s<t.length;s++)if(t[s].toLowerCase()==e.tagName.toLowerCase())return e}else{if("string"!=typeof t)return e;if(t.toLowerCase()==e.tagName.toLowerCase())return e}if(e.previousSibling)e=e.previousSibling;else{if(!e.parentNode)return null;e=e.parentNode}}}function domGetNext(e,t){for(e=domGet(e);;){if(1==e.nodeType)if("object"==typeof t){for(var s=0;s<t.length;s++)if(t[s].toLowerCase()==e.tagName.toLowerCase())return e}else{if("string"!=typeof t)return e;if(t.toLowerCase()==e.tagName.toLowerCase())return e}if(e.nextSibling)e=e.nextSibling;else{if(!e.parentNode)return null;e=e.parentNode}}}function domSetAlpha(e,t){e=domGet(e),document.addEventListener?e.style.MozOpacity=parseInt(t)/100:e.style.filter="alpha(opacity="+parseInt(t)+", finishopacity=0, style=0)"}function domRemove(e){(e=domGet(e)).parentNode.removeChild(e)}navigator.userAgent.match(/Opera/)?browserType="opera":navigator.userAgent.match(/MSIE/)?browserType="ie":navigator.userAgent.match(/Mozilla/)&&(browserType="ns");var gDomSetFlashVarQueue=new Array,gDomSetFlashVarTimer=!1,windowWebpage;function domSetFlashVarTimer(){if(0==gDomSetFlashVarQueue.length)return clearInterval(gDomSetFlashVarTimer),void(gDomSetFlashVarTimer=!1);var e=gDomSetFlashVarQueue.pop();try{e.obj.SetVariable(e.name,e.value)}catch(e){}try{e.obj.SetVariable("c."+e.name,e.value)}catch(e){}e.count--,e.count>0&&gDomSetFlashVarQueue.unshift(e)}function domSetFlashVar(e,t,s){var a=!1;if(document.embeds&&(a=document.embeds[e]),a||(a=document.getElementById(e)),a){var i=new Object;i.obj=a,i.name=t,i.value=s,i.count=3,gDomSetFlashVarQueue.unshift(i),gDomSetFlashVarTimer||(gDomSetFlashVarTimer=setInterval("domSetFlashVarTimer()",20))}}function popup(e,t,s,a){if(!a){var i=domGetParent(domEventGetTarget(),"A");i&&(a=i.href)}if(a){s||(s="");var n=window.open(a,s,"width="+e+",height="+t+",menubar=no,location=no,status=yes,toolbar=no");if(n)return n.focus(),(window.event||window.nsevent)&&(domEventPreventDefault(),domEventCancelBubble()),!1}return!1}function popupAbo(e,t,s,a){if(!a){var i=domGetParent(domEventGetTarget(),"A");i&&(a=i.href)}if(a){s||(s="");var n=window.open(a,s,"width="+e+",height="+t+",menubar=no,location=no,status=yes,toolbar=no");if(n)return n.focus(),(window.event||window.nsevent)&&(domEventPreventDefault(),domEventCancelBubble()),!1}}function popupClose(e){window.opener?(e&&window.opener.location&&window.opener.location.reload(),window.close()):history.back()}function changeButtons(e){var t=e.src,s=t.substr(t.length-3,3);if(0==t.substr(t.length-5,1))var a=1;else a=0;var i=t.substring(0,t.length-5)+a+"."+s;e.src=i}function bilderVorladen(){if(document.Vorladen=new Array,document.images)for(var e=0;e<bilderVorladen.arguments.length;e++)document.Vorladen[e]=new Image,document.Vorladen[e].src=bilderVorladen.arguments[e]}function popMap(e,t,s,a){if(!a){var i=domGetParent(domEventGetTarget(),"A");i&&(a=i.href)}if(a){s||(s="");var n=window.open(a,s,"width="+e+",height="+t+",menubar=no,location=no,status=yes,toolbar=no");if(n)return n.focus(),(window.event||window.nsevent)&&(domEventPreventDefault(),domEventCancelBubble()),!1;nextpage=confirm("Bitte Deaktiviere bei deinem Browser den Popupblocker. Dieser verhindert das die Karte geladen wird. Soll nun die Karte ohne Popup angezeigt werden"),nextpage&&(window.location.href=a)}}function showBusyLayer(){var e=jQuery("#busy_layer");null!=e&&(e.css("visibility","visible"),e.css("display","block"))}function hideBusyLayer(){var e=jQuery("#busy_layer");null!=e&&(e.css("visibility","hidden"),e.css("display","none"))}function bookmarkDO(e,t){if(window.sidebar)window.sidebar.addPanel(e,t,"");else if(window.opera&&window.print){var s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("title",e),s.setAttribute("rel","sidebar"),s.click()}else document.all&&window.external.AddFavorite(t,e)}function hideQuestDetails(){$("questDetails").innerHTML='<img src="'+CDN+'do_img/global/intro/loader_anim.gif" alt="" style="position: absolute; left: -118px; top: 28px;" />'}function toggleQuestChildrenVisibility(e,t,s){$("list_"+e).toggle(),"none"==$("list_"+e).style.display?$(s+"_"+t).src=CDN+"do_img/global/quests/condition_closed.gif":$(s+"_"+t).src=CDN+"do_img/global/quests/condition_open.gif"}function preloadImg(){if(document.Vorladen=new Array,document.images)for(var e=0;e<preloadImg.arguments.length;e++)document.Vorladen[e]=new Image,document.Vorladen[e].src=preloadImg.arguments[e]}function questDetailToggle(){$("questDetailTasks").toggle(),$("questDetailDescription").toggle(),$("questDetailTasks").visible()?$("questDetailToggle").style.backgroundImage="url("+CDN+"../do_img/global/quests/toggle_text.png)":$("questDetailToggle").style.backgroundImage="url("+CDN+"../do_img/global/quests/toggle_list.png)"}function closeLayer(e){jQuery("#"+e).hide(),hideBusyLayer()}function referToURL(e){0==e.indexOf("//")&&(e=e.substr(1,e.length)),window.opener?referOpenerToUrl(e):document.isOpenSocial&&showGame(document.webHost+"/"+e+"&openSocial=1")}function referOpenerToUrl(e){"do_webpage"==window.opener.name?(null==windowWebpage?(windowWebpage=window.open("","do_webpage")).location!=e&&(windowWebpage.location=e):windowWebpage.closed?windowWebpage=window.open(e,"do_webpage"):windowWebpage.location!=e&&(windowWebpage.location=e),windowWebpage.focus()):(window.opener.location.href=e,window.opener.focus())}function referToExternalURLInNewWindow(e,t){void 0===t&&(t=!0),window.opener&&!t?window.opener.open(e,"_blank"):window.open(e,"_blank")}function referToExternalURL(e){window.opener&&(window.opener.location.href=e,window.opener.focus())}function openContextHelp(){showHelp()}function showHangar(){window.opener&&(window.opener.location.href="indexInternal.es?action=internalDock",window.opener.focus())}function showPetFuel(){window.opener&&(window.opener.location.href="indexInternal.es?action=internalDock&category=petGear&itemId=PET_FUEL",window.opener.focus())}function Evoucher(){""!=jQuery(".evoucherInputField").val()&&(jQuery(".evoucherInputField").val(""),(jQuery(".evoucherInputField").hasClass("redText")||jQuery(".evoucherInputField").hasClass("greenText"))&&(jQuery(".evoucherInputField").removeClass("greenText"),jQuery(".evoucherInputField").removeClass("redText"),jQuery(".evoucherInputField").addClass("whiteText")))}function BreakingNews(){this.breakingNewsInterval=!1,this.currentIconID=0,this.maxIconID=0,this.keys=!1,this.images=!1,this.titles=!1,this.links=!1,this.durations=!1,this.secondsCounter=0,this.titlePosition=12,breakingNewsObject=this,this.setMaxIconID=function(e){this.maxIconID=e-1,0==this.maxIconID&&$("breakingNewsIconContainer").hide()},this.setKeys=function(e){this.keys=e},this.setImages=function(e){this.images=e},this.setTitles=function(e){this.titles=e},this.setLinks=function(e){this.links=e},this.setDurations=function(e){this.durations=e},this.init=function(){this.currentIconID=this.maxIconID,this.hardRedraw(),window.setInterval("breakingNewsObject.scrollTitle()",50)},this.start=function(){0==this.breakingNewsInterval&&this.maxIconID>0&&(this.breakingNewsInterval=window.setInterval("breakingNewsObject.changeHighlight()",1e3))},this.stop=function(){window.clearInterval(this.breakingNewsInterval),this.breakingNewsInterval=!1},this.changeHighlight=function(){this.secondsCounter++,this.durations[this.currentIconID]<=this.secondsCounter&&(this.secondsCounter=0,this.currentIconID--,this.currentIconID<0&&(this.currentIconID=this.maxIconID),this.smoothRedraw(),this.titlePosition=12)},this.smoothRedraw=function(){for(var e=$$(".breakingNewsTitle"),t=0;t<e.length;t++)e[t].innerHTML=" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- ";var s=$("breakingNewsContainer").cloneNode(!0);s.setAttribute("id","breakingNewsContainerHelper"),s.style.display="none",s.style.backgroundImage="url(do_img/global/events/"+this.images[this.currentIconID]+")",$("breakingNewsContainer").parentNode.appendChild(s),Effect.Fade("breakingNewsContainer",{duration:.5}),Effect.Appear("breakingNewsContainerHelper",{duration:.5}),window.setTimeout("$('breakingNewsContainer').remove(); $('breakingNewsContainerHelper').setAttribute('id', 'breakingNewsContainer');",1100),$("currentIconID").value=this.keys[this.currentIconID],$("breakingNewsContainerFrame").onclick=function(){showNews($("currentIconID").value)},this.redrawIcons()},this.hardRedraw=function(){for(var e=$$(".breakingNewsTitle"),t=0;t<e.length;t++)e[t].innerHTML=" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- "+this.titles[this.currentIconID]+" --- ";$("breakingNewsContainer").style.backgroundImage="url(do_img/global/events/"+this.images[this.currentIconID]+")",$("breakingNewsContainerHelper")&&($("breakingNewsContainerHelper").style.backgroundImage="url(do_img/global/events/"+this.images[this.currentIconID]+")"),$("currentIconID").value=this.keys[this.currentIconID],$("breakingNewsContainerFrame").onclick=function(){showNews($("currentIconID").value)},this.redrawIcons(),this.titlePosition=12},this.redrawIcons=function(){$$(".breakingNewsIcon").each(function(e){e.style.border="1px solid black"}),$("breakingNewsIcon"+(this.currentIconID+1)).style.border="1px solid #dcdcdc"},this.scrollTitle=function(){this.titlePosition-=2;for(var e=$$(".breakingNewsTitle"),t=0;t<e.length;t++)e[t].setStyle({left:this.titlePosition+"px"})},this.over=function(e){this.currentIconID=e-1,this.stop(),this.hardRedraw()},this.out=function(){this.start()}}function clientResolutionChanged(e){opener&&xajax_clientResolutionChanged(e)}"ns"==browserType&&(document.addEventListener("mousedown",function(e){window.nsevent=e},!0),document.addEventListener("mouseup",function(e){window.nsevent=e},!0),document.addEventListener("mousemove",function(e){window.nsevent=e},!0),document.addEventListener("click",function(e){window.nsevent=e},!0),document.addEventListener("keyup",function(e){window.nsevent=e},!0),document.addEventListener("keydown",function(e){window.nsevent=e},!0),document.addEventListener("keypressed",function(e){window.nsevent=e},!0),document.addEventListener("blur",function(e){window.nsevent=e},!0),document.addEventListener("focus",function(e){window.nsevent=e},!0));var confirmButtonText={confirmText:""};function setConfirmButtonText(e,t){confirmButtonText[e]=t}function getConfirmButtonText(e){return confirmButtonText[e]}var cancelButtonText={cancelText:""};function setCancelButtonText(e,t){cancelButtonText[e]=t}function getCancelButtonText(e){return cancelButtonText[e]}function openConfirm(e,t){Dialog.confirm(t,{height:100,width:300,okLabel:getConfirmButtonText("confirmText"),cancelLabel:getCancelButtonText("cancelText"),ok:function(t){return location.href=e,!0}})}function openConfirmSkillTreeReset(e){Dialog.confirm(e,{height:100,width:300,okLabel:getConfirmButtonText("confirmText"),cancelLabel:getCancelButtonText("cancelText"),ok:function(e){return xajax_skillTreePurchaseSkillReset(),!0}})}function showFooterLayer(e){showBusyLayer(),document.getElementById(e).style.display="block"}function closeInfo(e){hideBusyLayer(),document.getElementById(e).style.display="none"}function checkTransportTime(e,t){var s=0;for(j=0;j<$("sendTransport").elements.length;j++)"text"==$("sendTransport").elements[j].type&&!1===isNaN(parseInt($("sendTransport").elements[j].value))&&(s+=parseInt($("sendTransport").elements[j].value));1==t&&(s/=2),time=s*e;var a=Math.floor(time/60),i=Math.round(time%60);i<10&&(i="0"+i),60==i&&(i="00",a+=1),s>0&&0==a&&0==i&&(i="01"),$("timeForTransport").innerHTML=s>0?a+":"+i:"?"}function do_redirect(e,t){if(!e)return!1;t?window.open(e,"_blank"):window.open(e,"_self")}function clientEvent(e){}var openSocial=0;function bpCloseWindow(){1==openSocial?document.location.reload():self.close()}function bpReloadOpener(){opener.document.location.reload()}function changeView4July(e){$("july4thFireworksUser").hide(),$("july4thFireworksFaction").hide(),$("july4thFireworksClan").hide(),"july4thFireworksUser"==e?$("july4thFireworksUser").show():"july4thFireworksFaction"==e?$("july4thFireworksFaction").show():"july4thFireworksClan"==e&&$("july4thFireworksClan").show()}function openPayment(e,t){window.open("/indexInternal.es?action=internalPayment&subaction=showDynamicItem&type="+escape(e)+"&itemID="+escape(t),"paymentglobal","width=840,height=680,left=100,top=200").focus()}function showFeedbackForm(){}function refreshPage(e){window.opener&&0==e&&(window.opener.location.href="indexInternal.es?action=internalNanoTechFactory")}var imgObj={imgUrl:""};function setImgUrl(e,t){imgObj[e]=t}function getImgUrl(e){return imgObj[e]}var pilotSheet=new PilotSheet;function PilotSheet(){var e=!1;this.friendRequest=new Array,this.arrayLength=0,this.messageStats=null,this.friendList=function(e,t,s){if("friend"==e||"denied"==e){jQuery("#friend_"+t);var a=jQuery("#friend_"+t+"_accepted");jQuery("#friend_"+t+"_denied").remove(),a.removeAttr("onclick"),a.html(""),a.html(s),a.removeClass("confirmButton"),a.addClass("doneFriendRequest");var i=jQuery(".requestNumber"),n=i.html()-1;i.html(""),i.html(n);var r=new Array;r.type="answerFriendshipRequest",r.key=t,r.status=e,xajax_pilotSheet(r)}else"makeAjaxCall"==e&&(this.friendRequest.type=e,0!=this.arrayLength&&(xajax_pilotSheet(this.friendRequest),this.arrayLength=0))},this.answerFriendRequest=function(e,t,s){jQuery("#friend_"+t);var a=jQuery("#friend_"+t+"_accepted");jQuery("#friend_"+t+"_denied").remove(),a.removeAttr("onclick"),a.html(""),a.html(s),a.removeClass("confirmButton"),a.addClass("doneFriendRequest");var i=jQuery(".requestNumber"),n=i.html()-1;i.html(""),i.html(n);var r=new Array;r.type="answerFriendshipSL",r.key=t,r.status=e,xajax_pilotSheet(r)},this.inviteAsFriend=function(e,t){var s=new Array;s.type="answerFriendshipSL",s.key=e,s.status="invite",s.encoded=t,xajax_pilotSheet(s)},this.hideInviteButton=function(e){var t=$("inviteButt");if(t)switch(e){case"show":t.style.display="block";break;case"hide":t.style.display="none"}},this.setSkilltreeNavigationTabActive=function(){jQuery("#tabButton1")?jQuery("#tabButton1").hasClass("tabButtonActive")&&(jQuery("#tabButton1").removeClass("tabButtonActive"),jQuery("#tabLabel1").removeClass("tabLabel1Active"),jQuery("#tabButton1").addClass("tabButtonInActive"),jQuery("#tabLabel1").addClass("tabLabel1InActive")):jQuery("#tabButton2")?jQuery("#tabButton2").hasClass("tabButtonActive2")&&(jQuery("#tabButton2").removeClass("tabButtonActive2"),jQuery("#tabLabel2").removeClass("tabLabel2Active"),jQuery("#tabButton2").addClass("tabButtonInActive"),jQuery("#tabLabel2").addClass("tabLabe21InActive")):jQuery("#tabButton4")&&jQuery("#tabButton4").hasClass("tabButtonActive1")&&(jQuery("#tabButton4").removeClass("tabButtonActive1"),jQuery("#tabLabel4").removeClass("tabLabel4Active"),jQuery("#tabButton4").addClass("tabButtonInActive"),jQuery("#tabLabel4").addClass("tabLabel4InActive")),jQuery("#tabButton3")&&jQuery("#tabButton3").hasClass("tabButtonInActive")&&(jQuery("#tabButton3").removeClass("tabButtonInActive"),jQuery("#tabLabel3").removeClass("tabLabel3InActive"),jQuery("#tabButton3").addClass("tabButtonActive"),jQuery("#tabLabel3").addClass("tabLabel3Active")),jQuery("#pppAjaxLoaderMask").css("left",-33)},this.ajaxLoader=function(e){var t=jQuery("#pppAjaxLoaderMask"),s=jQuery("#pppAjaxLoader");switch(e){case"show":t.css("display","block"),s.css("display","block");break;case"hide":t.css("display","none"),s.css("display","none")}},this.bgMask=function(e){var t=$("pppAjaxLoaderMask");switch(e){case"show":t.style.display="block";break;case"hide":t.style.display="none"}},this.successTimer=null,this.failureTimer=null,this.editMessage=function(e,t,s){var a,i,n,r=5e3;switch("profile"==s?(a=jQuery("#editStatsSuccessProfile"),i=jQuery("#editStatsFailedProfile"),n=jQuery("#externalPPPLinkDialog")):"statusMessage"==s?(a=jQuery("#editStatsSuccessMess"),i=jQuery("#editStatsFailedMess")):"imgUpload"==s?(a=jQuery("#imgUploadSuccess"),i=jQuery("#imgUploadError"),r=1e4):"bonusLog"==s&&(i=jQuery("#bonuslogBookStatus")),e){case"show":switch(t){case"success":i&&(i.hasClass("showStatus")&&(i.removeClass("showStatus"),i.addClass("hideStatus")),n&&n.hasClass("hideStatus")&&(n.removeClass("hideStatus"),n.addClass("showStatus"))),a&&(a.hasClass("hideStatus")&&(a.removeClass("hideStatus"),a.addClass("showStatus")),n&&n.hasClass("showStatus")&&(n.removeClass("showStatus"),n.addClass("hideStatus"))),pilotSheet.successTimer=window.setTimeout(function(){pilotSheet.editMessage("hide","success",s)},r);break;case"failed":a&&(a.hasClass("showStatus")&&(a.removeClass("showStatus"),a.addClass("hideStatus")),n&&n.hasClass("hideStatus")&&(n.removeClass("hideStatus"),n.addClass("showStatus"))),i&&(i.hasClass("hideStatus")&&(i.removeClass("hideStatus"),i.addClass("showStatus")),n&&n.hasClass("showStatus")&&(n.removeClass("showStatus"),n.addClass("hideStatus"))),pilotSheet.failureTimer=window.setTimeout(function(){pilotSheet.editMessage("hide","failed",s)},r)}break;case"hide":if("success"==t){if(a&&a.hasClass("hideStatus"))return}else if("failed"==t&&i&&i.hasClass("hideStatus"))return;i&&(i.hasClass("showStatus")&&(i.removeClass("showStatus"),i.addClass("hideStatus")),clearTimeout(pilotSheet.failureTimer)),a&&(a.hasClass("showStatus")&&(a.removeClass("showStatus"),a.addClass("hideStatus")),clearTimeout(pilotSheet.successTimer)),n&&n.hasClass("hideStatus")&&(n.removeClass("hideStatus"),n.addClass("showStatus")),jQuery("#optimalSizeHint").is(":hidden")&&jQuery("#optimalSizeHint").css("display","block")}},this.initialiseCustomSelectElements=function(){this.checkedIn=!1,this.checkedIn=!1,this.checkedIn=!1},this.handleProfileSearch=function(e){var t=new Array;t.type=e,jQuery("#searchProfileField")&&(t.profileUsername=jQuery("#searchProfileField").val()),xajax_pilotSheet(t)},this.handleProfileEditForm=function(e,t,s,a){var i=jQuery("#"+e),n=jQuery("#editFormProfileAll"),r=(jQuery("#editFormProfile"),jQuery("#closeButtonEdit"));jQuery("#editStatsSuccessProfile"),jQuery("#editStatsFailedProfile"),jQuery("#pppAjaxLoaderMask");switch((new Array).type="editProfileForm",a){case"show":pilotSheet.initCustomInputElements(),pilotSheet.editMessage("hide","failed","profile"),pilotSheet.editMessage("hide","success","profile"),pilotSheet.editMessage("hide","success","imgUpload"),pilotSheet.editMessage("hide","failed","imgUpload"),jQuery.browser.msie||(jQuery("#privacySettingsTitle").addClass("privacySettingsHint"),jQuery("#privacySettingsHint").addClass("privacySettingsHint")),inviteIncentives.busyLayer("show"),n.css("display","block"),r.css("display","block"),tooltip.destroyEventListerners(),tooltip.init();break;case"hide":i.style.display="none",pilotSheet.ajaxLoader("show")}},this.imageUpload,this.resetImageUpload=function(){this.imageUpload=!1},this.radiod=!1,this.initCustomInputElements=function(){e||(Custom.init(),e=!0)},this.unInitCustomInputElements=function(){e&&(Custom.clear(),e=!1)},this.handleImageUpload=function(e,t,s){alert(s+" , "+t),alert(t)},this.handleFormUpload=function(e,t,s){switch(e){case"imgUpload":jQuery("#img_00").val(),jQuery("#img_0").val();"error"==t?(jQuery("#img_00").val("change_failed"),jQuery("#imgLoader").removeClass("showStatus"),jQuery("#imgLoader").addClass("hideStatus"),pilotSheet.editMessage("show","failed","imgUpload")):"no_error"==t&&(jQuery("#img_00").val("change_success"),jQuery("#imgLoader").removeClass("showStatus"),jQuery("#imgLoader").addClass("hideStatus"),pilotSheet.editMessage("show","success","imgUpload"));break;case"profileEdit":if("error"==t)pilotSheet.handleProfilePage("closeButton","closeEditProfile"),pilotSheet.editMessage("show","failed","profile");else if("no_error"==t){jQuery("#img_00").val("no_change");var a=Array();a.type="showProfilePage",a.actionType="edited",xajax_pilotSheet(a)}break;case"statusMessage":"error"==t?pilotSheet.editMessage("show","failed","statusMessage"):pilotSheet.editMessage("show","success","statusMessage"),jQuery("#changeStatusMessage").val("no");break;case"profileSearch":jQuery("#searchProfileField")&&jQuery("#searchProfileField").val(s),"error"!=t?jQuery("#searchProfileFieldStatus")&&(jQuery("#searchProfileFieldStatus").hasClass("searchProfileAjaxLoader")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileAjaxLoader"),jQuery("#searchProfileFieldStatus").addClass("searchProfileSuccess")),do_redirect(t,"newWindow")):jQuery("#searchProfileFieldStatus").hasClass("searchProfileAjaxLoader")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileAjaxLoader"),jQuery("#searchProfileFieldStatus").addClass("searchProfileFailure"))}},this.handleProfilePage=function(e,t,s){var a=new Array;a.type=t;var i=jQuery("#"+e),n=(jQuery("#editFormProfile"),jQuery("#editForm"),jQuery("#closeButtonEdit"));xajax.getFormValues(e);switch(t){case"imgUpload":var r=s.replace(/^C:\\fakepath\\/i,"");jQuery("#fakefilepc").val(r),jQuery("#img_00").val("change_inProgress"),jQuery("#imgLoader").removeClass("hideStatus"),jQuery("#imgLoader").addClass("showStatus"),""!=jQuery("#imgUpload").val()&&(jQuery("#optimalSizeHint").css("display","none"),i.submit());break;case"imgUploadReload":pilotSheet.editMessage("show","success","imgUpload");break;case"editUserProfile":pilotSheet.handleProfilePage("saveButton","closeEditProfile"),pilotSheet.ajaxLoader("show"),jQuery("#editForm").submit(),inviteIncentives.busyLayer("hide");break;case"closeEditProfile":"closeButton"==e&&jQuery("#img_00").val("no_change"),jQuery("#editFormProfileAll")&&jQuery("#editFormProfileAll").css("display","none"),n.css("display","none"),inviteIncentives.busyLayer("hide");break;case"profilePage":pilotSheet.ajaxLoader("show"),a.type="showProfilePage",xajax_pilotSheet(a)}},this.performProfileSearch=function(){0!=jQuery("#searchProfileField").val().length&&(jQuery("#searchProfileFieldStatus")&&(jQuery("#searchProfileFieldStatus").hasClass("hideElement")&&(jQuery("#searchProfileFieldStatus").removeClass("hideElement"),jQuery("#searchProfileFieldStatus").addClass("showELement")),jQuery("#searchProfileFieldStatus").hasClass("searchProfileSuccess")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileSuccess"),jQuery("#searchProfileFieldStatus").addClass("searchProfileAjaxLoader")),jQuery("#searchProfileFieldStatus").hasClass("searchProfileFailure")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileFailure"),jQuery("#searchProfileFieldStatus").addClass("searchProfileAjaxLoader"))),jQuery("#searchProfileForm").submit())},this.upLoadStatusMessage=function(){jQuery("#changeStatusMessage").val("yes"),jQuery("#statusMessageForm").submit()},this.handleAchievementPage=function(e,t,s){switch(t){case"achievementPage":pilotSheet.ajaxLoader("show"),xajax_achievement(),pilotSheet.hideInviteButton("hide"),pilotSheet.ajaxLoader("hide")}},this.handleSkilltree=function(e,t){var s=new Array;switch(s.type=e,s.imgUrl=getImgUrl("imgUrl"),e){case"showSkilltree":tooltip.destroyEventListerners(),pilotSheet.ajaxLoader("show"),xajax_pilotSheet(s);break;case"convertPoints":tooltip.destroyEventListerners(),pilotSheet.ajaxLoader("show");var a=$("researchpoints").innerHTML;s.currentValue=a,s.label=t,xajax_pilotSheet(s);break;case"deactivateLogButton":var i=$("researchPoints_button_1"),n=$("arrow_logfile_1"),r=$("researchPoints_arrow_1");n.id="arrow_logfile_0",r.id="researchPoints_arrow_0";i.firstChild;i.innerHTML="";var o=new Element("span",{class:"font_inactive"});i.appendChild(o);var l=new Element("strong",{});o.appendChild(l),l.innerHTML=t,i.id="researchPoints_button_0"}},this.setSkilltreeScrollbar=function(){jQuery("#skillTreeHorScrollable").jScrollPane()},this.scrollHorizontal=function(e,t,s){t.scrollLeft=Math.round(e/s.maximum*(t.scrollWidth-t.offsetWidth))},this.handleShowExternalPPPLink=function(){jQuery("#userProfileInfoPopup").hasClass("hideinviteInfoPopup")&&(jQuery("#userProfileInfoPopup").removeClass("hideinviteInfoPopup"),jQuery("#userProfileInfoPopup").addClass("showinviteInfoPopup"))}}var achievement=new Achievements;function Achievements(){this.saveUserTitleChange=function(){jQuery("#editTitleForm").submit()},this.changeTitleDisplay=function(e,t,s,a){jQuery("#achievementCurrentTitleLabel").html(t),jQuery("#"+s).removeClass("titleAchievementBoxSelected"),jQuery("#"+a).addClass("titleAchievementBoxSelected")},this.showFilter=function(){jQuery("#filter_dropdownLayer").toggle()},this.onMouseOver=function(e){jQuery("#"+e).addClass("filter_onMouseOver")},this.onMouseOut=function(e){jQuery("#"+e).removeClass("filter_onMouseOver")},this.selectedCategory=function(e){jQuery(".selectedCategory").removeClass("selectedCategory"),jQuery(".selectedSubCategory").removeClass("selectedSubCategory"),-1!=e.indexOf("activity")?(jQuery("#achievement_activity").addClass("selectedCategory"),jQuery("#"+e).addClass("selectedSubCategory")):-1!=e.indexOf("event")?(jQuery("#achievement_event").addClass("selectedCategory"),jQuery("#"+e).addClass("selectedSubCategory")):jQuery("#"+e).addClass("selectedCategory")}}var inviteIncentives=new PilotInviteIncentives;function PilotInviteIncentives(){this.initialiseScrollBar=function(){jQuery(".scroll-pane").jScrollPane({showArrows:!0})},this.busyLayer=function(e){var t=jQuery("#busyLayerPilotSheet");switch(e){case"show":t.css("display","block"),t.css("height",1180),t.css("width",2e3),t.css("top",-500),t.css("left",-500);break;case"hide":t.css("display","none"),t.css("height",0),t.css("width",0),t.css("top",0),t.css("left",0)}},this.hideInfoLayerPermanently=function(e){xajax.getFormValues(e);if(document.inviteInfoDisplayOpton.inviteInfoCheckbox.checked){var t=new Array;t.type="hideInviteInfo",xajax_pilotInviteIncentives(t),inviteIncentives.handleIncentives("setInfoValue","",1)}},this.mailInviteCallback=function(){0!=jQuery("#friendInviteButton").length&&inviteIncentives.handleIncentives("showIncentivePage","","callback")},this.handleIncentives=function(e,t,s){if(t&&""!=t)var a=jQuery("#"+t);var i=null,n=new Array;jQuery("#busy_layer");n.type=e;var r=jQuery("#inviteInfoForm :input");switch(jQuery.each(r,function(){"inviteInfo"==this.name&&(i=jQuery(this).val())}),e){case"showIncentivePage":n.inviteType="Email",n.flag=s,"callback"!=s&&(1==i&&""!=i||(this.checkedIn=!0,inviteIncentives.handleIncentives("showInfoLayer",t))),xajax_pilotInviteIncentives(n),tooltip.destroyEventListerners(),pilotSheet.ajaxLoader("show");break;case"closeInfoLayer":inviteIncentives.hideInfoLayerPermanently("inviteInfoDisplayOpton"),null!=a&&a.hasClass("showinviteInfoPopup")&&(a.removeClass("showinviteInfoPopup"),a.addClass("hideinviteInfoPopup")),inviteIncentives.busyLayer("hide");break;case"showInfoLayer":inviteIncentives.busyLayer("show"),null!=a&&a.hasClass("hideinviteInfoPopup")&&(a.removeClass("hideinviteInfoPopup"),a.addClass("showinviteInfoPopup"));break;case"setInfoValue":jQuery.each(r,function(){"inviteInfo"==this.name&&(i=jQuery(this).val(s))})}},this.handleInvites=function(e){var t=new Array;switch(t.type=e,e){case"showInvitePage":pilotSheet.hideInviteButton("hide"),$("editFormProfileAll")&&($("editFormProfileAll").style.display="none"),xajax_pilotInviteIncentives(t)}},this.handleRemoveInvitee=function(e,t,s){var a=$(e),i=new Array;switch(i.type=t,t){case"handleImage":a.hasClassName("hideRemoveInvitee")?(a.removeClassName("hideRemoveInvitee"),a.addClassName("showRemoveInvitee")):a.hasClassName("showRemoveInvitee")&&(a.removeClassName("showRemoveInvitee"),a.addClassName("hideRemoveInvitee"));break;case"imageEffect":switch(s){case"rollin":if(a.hasClassName("hideRemoveInvitee")&&(a.removeClassName("hideRemoveInvitee"),a.addClassName("showRemoveInvitee")),a.hasClassName("removeInviteeInActive"))a.removeClassName("removeInviteeInActive"),a.addClassName("removeInviteeActive");else if(a.hasClassName("removeInviteeActive"))return;break;case"rollout":if(a.hasClassName("showRemoveInvitee")&&(a.removeClassName("showRemoveInvitee"),a.addClassName("hideRemoveInvitee")),a.hasClassName("removeInviteeActive"))a.removeClassName("removeInviteeActive"),a.addClassName("removeInviteeInActive");else if(a.hasClassName("removeInviteeInActive"))return}break;case"removeInvitee":var n=e.split("_"),r=n[1],o=$("middleRight_"+n[1]);i.inviteeID=r,a&&o&&(a.addClassName("hideListElement"),o.addClassName("hideListElement")),xajax_pilotInviteIncentives(i)}},this.handleLogBook=function(e,t,s){var a=jQuery("#bonusLogBook"),i=jQuery("#closeButtonBonusLog");switch(t){case"toggleLink":var n=jQuery("#"+e);n.hasClass("bonusLogBookLinkActive")?(n.removeClass("bonusLogBookLinkActive"),n.addClass("bonusLogBookLinkInActive")):n.hasClass("bonusLogBookLinkInActive")&&(n.removeClass("bonusLogBookLinkInActive"),n.addClass("bonusLogBookLinkActive"));break;case"showLog":jQuery("#inviteLogCount").val()<=0?pilotSheet.editMessage("show","failed","bonusLog"):(jQuery(".jspVerticalBar").css("z-index",1),showBusyLayer(),a.hasClass("hideBonusLogBook")&&(a.removeClass("hideBonusLogBook"),a.removeClass("removeForm"),a.addClass("showBonusLogBook"),a.addClass("elevateForm")),i&&i.hasClass("removeForm")&&(i.removeClass("removeForm"),i.removeClass("hideBonusLogBook"),i.addClass("showBonusLogBook"),i.addClass("elevateForm")),this.initialiseScrollBar());break;case"closeLogBook":a&&(a.hasClass("showBonusLogBook")&&(a.removeClass("showBonusLogBook"),a.addClass("hideBonusLogBook"),a.addClass("removeForm")),i&&i.hasClass("elevateForm")&&(i.removeClass("elevateForm"),i.removeClass("showBonusLogBook"),i.addClass("hideBonusLogBook"),i.addClass("removeForm")),hideBusyLayer())}}}var pilotInvites=new PilotInvites;function PilotInvites(){this.handleInvites=function(e,t){var s=new Array,a=$("pilotInvitePage"),n=$("inviteTab"),r=$("loginBonusTab"),o=$("subTabInvite"),l=$("subTabLoginBonus"),u=$("inviteContent"),d=$("loginBonus");switch(s.type=e,e){case"showInvitePage":d.style.display="none",u.style.display="block",pilotSheet.hideInviteButton("show"),r.removeClassName("inviteTabActive"),r.removeClassName("inviteTabRollOver"),r.addClassName("inviteTabInActive"),l.removeClassName("subTabLabelActive"),l.addClassName("subTabLabelInActive"),n.removeClassName("inviteTabInActive"),n.addClassName("inviteTabActive"),o.removeClassName("subTabLabelInActive"),o.addClassName("subTabLabelActive");break;case"showLoginBonus":var c=parseInt(t),h=c+1;if(pilotSheet.hideInviteButton("hide"),u.style.display="none",d.style.display="block",n.removeClassName("inviteTabActive"),n.removeClassName("inviteTabRollOver"),n.addClassName("inviteTabInActive"),o.removeClassName("subTabLabelActive"),o.addClassName("subTabLabelInActive"),r.removeClassName("inviteTabInActive"),r.addClassName("inviteTabActive"),l.removeClassName("subTabLabelInActive"),l.addClassName("subTabLabelActive"),c<=5){for($("boniProgress").addClassName("boniProgress_"+c),$("boni_"+c).addClassName("boniHeadNextBg"),$("boniText_"+c).addClassName("boniHeadCurrent"),c=--c;c>0;)$("boniHead_"+c).addClassName("boniHeadReceived"),$("boniText_"+c).addClassName("boniHeadReceived"),$("boniIcon_"+c).addClassName("boniHeadReceivedBg"),c=--c;for(;h<6;)$("boniHead_"+h).addClassName("boniHeadOpen"),$("boniText_"+h).addClassName("boniHeadOpen"),h=++h}else for(i=1;i<6;i++)$("boniProgress").addClassName("boniProgress_"+i),$("boniText_"+i).addClassName("boniHeadReceived"),$("boniIcon_"+i).addClassName("boniHeadReceivedBg"),$("boniHead_"+i).addClassName("boniHeadReceived");break;case"hideInvitePage":a.removeClassName("pilotInvitePageShow"),o.removeClassName("subTabLabelActive"),n.removeClassName("inviteTabActive"),n.addClassName("inviteTabInActive"),a.addClassName("pilotInvitePageHide"),o.addClassName("subTabLabelInActive")}},this.handleShowInviteMask=function(e,t){jQuery("#exposeMask").css("display","block"),jQuery("#exposeMask").addClass("changeBGColor");jQuery(".button-area");jQuery("#invite-form").css("display","block");var s=jQuery("#invite-send");s.html("");jQuery(document.createElement("img")).attr({src:"/do_img/global/text_tf.esg?l="+t+"&s=13&t=pilot_invite_incentive_page_send_invitation&f=eurostyle_tmed&bgcolor=green&color=white"}).addClass("imgButtonMailInvite").appendTo(s);var a=jQuery(document.createElement("span")).appendTo(s),i=(jQuery(document.createElement("text")).addClass("messLabel").appendTo(a).html(e),jQuery(".invite-new"));i.html("");var n=jQuery(document.createElement("span")).appendTo(i);jQuery(document.createElement("img")).attr({src:"/do_img/global/text_tf.esg?l="+t+"&s=11&t=pilot_invite_incentive_page_invite_more&f=eurostyle_tmed&bgcolor=green&color=white"}).addClass("imgButtonMailInvite").appendTo(n)},this.showEmailInviteDialog=function(e,t,s){"external"==s?(jQuery("#exposeMask").css("display","block"),jQuery("#exposeMask").addClass("changeBGColor")):showBusyLayer();var a=jQuery("#invite-dialog"),i=(jQuery(".button-area"),jQuery("#share-invite-url")),n=jQuery("#invite-form");a.css("display","block"),n.css("display","block"),i.css("display","block");var r=jQuery("#invite-send");r.html("");jQuery(document.createElement("img")).attr({src:"/do_img/global/text_tf.esg?l="+t+"&s=13&t=pilot_invite_incentive_page_send_invitation&f=eurostyle_tmed&bgcolor=green&color=white"}).addClass("imgButtonMailInvite").appendTo(r);var o=jQuery(document.createElement("span")).appendTo(r),l=(jQuery(document.createElement("text")).addClass("messLabel").appendTo(o).html(e),jQuery(".invite-new"));l.html("");var u=jQuery(document.createElement("span")).appendTo(l);jQuery(document.createElement("img")).attr({src:"/do_img/global/text_tf.esg?l="+t+"&s=11&t=pilot_invite_incentive_page_invite_more&f=eurostyle_tmed&bgcolor=green&color=white"}).addClass("imgButtonMailInvite").appendTo(u)}}var buttonHandler=new ButtonHandler;function ButtonHandler(){this.toggleButtons=function(e,t,s){$(e).hasClassName(t+"Active")||($(s)&&$(s).classNames().each(function(e,t){e.endsWith("InActive")?($(s).removeClassName(e),$(s).addClassName(e.sub("InActive","Active"))):($(s).removeClassName(e),$(s).addClassName(e.sub("Active","InActive")))}),$(e).classNames().each(function(t,s){t.endsWith("InActive")?($(e).removeClassName(t),$(e).addClassName(t.sub("InActive","RollOver"))):($(e).removeClassName(t),$(e).addClassName(t.sub("RollOver","InActive")))}))},this.toggleCloseButton=function(e,t){var s=$(e);s.cleanWhitespace(s),s.hasClassName(t+"RollOver")?(s.removeClassName(t+"RollOver"),s.addClassName(t+"InActive")):(s.removeClassName(t+"InActive"),s.addClassName(t+"RollOver"))},this.clickedTabButton=function(e,t,s,a,i,n){for(var r=new Array,o=new Array;0!=t;)r.push(s+t),o.push(i+t),t--;r.each(function(t){t!=e?(jQuery("#"+t).hasClass("deactivateCursor")&&(jQuery("#"+t).removeClass("deactivateCursor"),jQuery("#"+t).addClass("activateCursor")),jQuery("#"+t).removeClass(s+"Active"),jQuery("#"+t).removeClass(s+"RollOver"),jQuery("#"+t).addClass(s+"InActive")):(jQuery("#"+t).removeClass(s+"InActive"),jQuery("#"+t).removeClass(s+"RollOver"),jQuery("#"+t).addClass(s+"Active"))}),o.each(function(e){e!=a?jQuery("#"+e)&&(jQuery("#"+e).removeClass(e+"Active"),jQuery("#"+e).addClass(e+"InActive")):(jQuery("#"+e).removeClass(e+"InActive"),jQuery("#"+e).addClass(e+"Active"))})}}var handleButtons=new HandleButtons;function HandleButtons(){this.toggleCloseButton=function(e,t){var s=jQuery("#"+e);s.hasClass(t+"RollOver")?(s.removeClass(t+"RollOver"),s.addClass(t+"InActive")):(s.removeClass(t+"InActive"),s.addClass(t+"RollOver"))}}var externalPPP=new ExternalPilotProfilePage;function ExternalPilotProfilePage(){this.toggleField=function(e){var t=$(e);t.hasClassName("hideSection")?(t.removeClassName("hideSection"),t.addClassName("showSection")):t.hasClassName("showSection")&&(t.removeClassName("showSection"),t.addClassName("hideSection")),Scroller.updateAll()},this.busyLayer=function(e){var t=jQuery("#busyLayer");switch(e){case"show":null!=t&&(t.css("visibility","visible"),jQuery("#equipmentContainer")&&jQuery("#equipmentContainer").hasClass("showElement")?t.css("height",1180):t.css("height",900));break;case"hide":null!=t&&(t.css("visibility","hidden"),t.css("height",0))}},this.handleProfileSearch=function(e){if(0!=jQuery("#searchProfileField").val().length){jQuery("#searchProfileFieldStatus")&&(jQuery("#searchProfileFieldStatus").hasClass("hideElement")&&(jQuery("#searchProfileFieldStatus").removeClass("hideElement"),jQuery("#searchProfileFieldStatus").addClass("showELement")),jQuery("#searchProfileFieldStatus").hasClass("searchProfileSuccess")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileSuccess"),jQuery("#searchProfileFieldStatus").addClass("searchProfileAjaxLoader")),jQuery("#searchProfileFieldStatus").hasClass("searchProfileFailure")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileFailure"),jQuery("#searchProfileFieldStatus").addClass("searchProfileAjaxLoader")));var t=new Array;t.type=e,jQuery("#searchProfileField")&&(t.profileUsername=jQuery("#searchProfileField").val());var s=jQuery("#profileForm :input");jQuery.each(s,function(){"profileID"==this.name&&(t.profileID=jQuery(this).val()),"instanceID"==this.name&&(t.instanceID=jQuery(this).val()),"language"==this.name&&(t.language=jQuery(this).val())}),"searchProfileFromExternalPPP"==e?xajax_externalPPP(t):"searchProfileFromInternalPPP"==e&&xajax_pilotSheet(t)}},this.handleProfileSearchReturn=function(e,t){e?(jQuery("#searchProfileFieldStatus")&&jQuery("#searchProfileFieldStatus").hasClass("searchProfileAjaxLoader")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileAjaxLoader"),jQuery("#searchProfileFieldStatus").addClass("searchProfileSuccess")),do_redirect(e,"newWindow")):jQuery("#searchProfileFieldStatus")&&jQuery("#searchProfileFieldStatus").hasClass("searchProfileAjaxLoader")&&(jQuery("#searchProfileFieldStatus").removeClass("searchProfileAjaxLoader"),jQuery("#searchProfileFieldStatus").addClass("searchProfileFailure")),jQuery("#searchProfileField")&&jQuery("#searchProfileField").val(t)},this.handleLanguageSelection=function(){jQuery.browser.msie&&(jQuery("#languageBoxBody").css("padding-left",0),jQuery("#languageBoxBody").css("width",160))},this.registrationAction="false",this.handleLogin=function(e,t){(new Array).type=e;var s=jQuery("#"+t);switch(jQuery("#containers").css("top",-501),e){case"login":externalPPP.busyLayer("show"),s&&s.hasClass("hideElement")&&(s.removeClass("hideElement"),s.addClass("showElement"));break;case"closeLogin":s&&(s.hasClass("showElement")&&(s.removeClass("showElement"),s.addClass("hideElement")),externalPPP.busyLayer("hide"));break;case"closeInstanceSelection":s&&(s.hasClass("showElement")&&(s.removeClass("showElement"),s.addClass("hideElement")),do_redirect(jQuery("#imgHost").val()),externalPPP.busyLayer("hide"));break;case"closeError":s&&(s.hasClass("showElement")&&(s.removeClass("showElement"),s.addClass("hideElement")),externalPPP.busyLayer("hide"));break;case"closeOK":var a=jQuery("#externalPPPLogin");s&&s.hasClass("showElement")&&(s.removeClass("showElement"),s.addClass("hideElement")),a&&a.hasClass("hideElement")&&(a.removeClass("hideElement"),a.addClass("showElement"))}},this.handlePasswordRecovery=function(e){switch(jQuery("#containers").css("top",-501),jQuery("#passwordRecoveryContainerBody").css("height",185),(new Array).type=e,e){case"closePasswordRecovery":jQuery("#errorLayer").remove(),jQuery("#recoveryStatus").html(""),jQuery("#recoveryStatus").removeClass("showElement"),jQuery("#recoveryStatus").addClass("hideElement"),jQuery(".signup_left").css("display","none"),jQuery(".signup_left").css("display","block"),jQuery(".signup_right").css("top",5),jQuery(".signup_right").css("left",49),jQuery(".signup_right").css("height",345),jQuery(".signup_submit").css("top",5),jQuery(".input_textLong").css("margin-bottom",0),jQuery("#passwordRecoveryContainer").removeClass("showElement"),jQuery("#passwordRecoveryContainer").addClass("hideElement"),jQuery(".signup_submit").css("top",5),externalPPP.busyLayer("hide");break;case"passwordRecovery":if(jQuery("[name=signup_signup]")){var t=jQuery("[name=signup_signup]").attr("action");if(-1!=t.indexOf("aedt")){var s=t.split("aedt=");jQuery("#aedt").val(s[s.length-1])}var a=jQuery("#imgHost").val();jQuery("[name=signup_signup]").attr("action",""+a),jQuery("#forceInstance").val()&&jQuery(".label_instances").parent().remove()}jQuery("#externalPPPLogin").removeClass("showElement"),jQuery("#externalPPPLogin").addClass("hideElement"),jQuery("#recoveryStatus").removeClass("hideElement"),jQuery(".signup_left").css("display","block"),jQuery(".signup_right").css("left",-430),jQuery(".signup_right").css("top",115),jQuery(".signup_right").css("height",100),jQuery(".input_textLong").css("margin-bottom",70),jQuery(".signup_submit").css("top",-55),jQuery("#passwordRecoveryContainer").addClass("showElement");break;case"back":var i=jQuery("#loginForm_default").attr("action");jQuery("#loginForm_default").attr("action",""),jQuery("#loginForm_default").attr("action",i.replace("&epwr=1","")),jQuery("#errorLayer").remove(),jQuery("#recoveryStatus").html(""),jQuery("#recoveryStatus").removeClass("showElement"),jQuery("#recoveryStatus").addClass("hideElement"),jQuery(".signup_left").css("display","none"),jQuery(".signup_right").css("top",5),jQuery(".signup_right").css("left",49),jQuery(".signup_right").css("height",345),jQuery(".signup_submit").css("top",5),jQuery(".input_textLong").css("margin-bottom",0),jQuery("#passwordRecoveryContainer").removeClass("showElement"),jQuery("#passwordRecoveryContainer").addClass("hideElement"),jQuery("#externalPPPLogin").removeClass("hideElement"),jQuery("#externalPPPLogin").addClass("showElement"),jQuery("#recoveryStatus").css("height",0)}},this.checked=!1,this.handleRegistration=function(e,t,s){if(jQuery(".signup_left").css("display","none"),"login"==s){var a=jQuery("#externalPPPLogin");a.removeClass("showElement"),a.addClass("hideElement")}(new Array).type=e;var i=jQuery("#"+t);switch(e){case"register":if(jQuery(".separator1").css("display","none"),jQuery(".separator2").css("display","none"),jQuery("[name=signup_signup]")){var n=jQuery("[name=signup_signup]").attr("action");if(-1!=n.indexOf("aedt")){var r=n.split("aedt="),o=r[r.length-1];jQuery("#aedt").val(o)}else o=jQuery("#aedt").val();var l=jQuery("#imgHost").val()+"&aedt="+o;jQuery("[name=signup_signup]").attr("action",""+l),jQuery("#forceInstance").val()&&jQuery(".label_instances").parent().remove()}this.checked||(Custom.init(),this.checked=!0),jQuery.browser.msie?(jQuery(".separator1").css("top",-35),jQuery(".separator2").css("top",40)):jQuery(".separator1").css("top",-55),jQuery("#recaptcha_widget").length>0?(jQuery(".separator1").css("display","none"),jQuery(".separator2").css("display","none"),jQuery(".signup_right td").css("height",0),jQuery("#containers").css("top",-550),jQuery(".signup_container").css("top",-10),jQuery(".signup_container").css("height",310),jQuery(".signup_right").css("top",-40),jQuery(".closeRegistration").css("top",-367)):(jQuery(".signup_right td").css("height",33),jQuery("#containers").css("top",-501),jQuery(".signup_container").css("top",-5),jQuery(".signup_container").css("height",215),jQuery(".signup_right").css("top",-40),jQuery(".closeRegistration").css("top",-272)),externalPPP.busyLayer("show"),i&&i.hasClass("hideElement")&&(i.removeClass("hideElement"),i.addClass("showElement"));break;case"closeRegistration":jQuery("#containers").css("top",-501),"registration"==s?do_redirect(jQuery("#imgHost").val()):i&&(i.hasClass("showElement")&&(i.removeClass("showElement"),i.addClass("hideElement")),externalPPP.busyLayer("hide"));break;case"closeError":jQuery("#containers").css("top",-501),i&&(i.hasClass("showElement")&&(i.removeClass("showElement"),i.addClass("hideElement")),externalPPP.busyLayer("hide"));break;case"closeOK":jQuery("#containers").css("top",-501);var u=jQuery("#externalPPPRegistration");i&&i.hasClass("showElement")&&(i.removeClass("showElement"),i.addClass("hideElement")),u&&u.hasClass("hideElement")&&(u.removeClass("hideElement"),u.addClass("showElement"))}},this.handleInstanceSelection=function(){var e=new Array;e.type="instanceSelection";var t=xajax.getFormValues("loginForm_default");xajax.getFormValues("insSelInput");e.username=t.loginForm_default_input_username,e.password=t.loginForm_default_input_password,xajax_externalPPP(e)},this.switchConfigView=function(e,t){var s=jQuery("#"+e);jQuery("#"+t).removeClass("configBarClicked"),s.addClass("configBarClicked")},this.handleFriendRequest=function(e,t){var s=new Array;s.profileOwner=jQuery("#profileOwner").val();var a=jQuery("#openRequest"),i=jQuery("#openRequestText");a&&a.hasClass("showElement")&&(a.removeClass("showElement"),a.addClass("hideElement"),i.removeClass("hideElement"),i.addClass("showElement")),s.type="answerFriendshipSL",s.status=e,s.key=t,s.instanceID=jQuery("#instanceID").val(),s.language=jQuery("#language").val(),xajax_externalPPP(s)},this.handleFriendShipRequest=function(){var e=new Array;e.sessionOwner=jQuery("#sessionOwner").val(),e.profileOwner=jQuery("#profileOwner").val(),e.type="inviteAsFriend";var t=jQuery("#addAsFriend"),s=(jQuery("#addAFriendLabel"),jQuery("#addAsFriend")),a=jQuery("#addAsFriendLabelInactive"),i=jQuery("#friendshipStatus");t&&t.hasClass("friendshipRequest")&&(t.removeClass("friendshipRequest"),t.addClass("spriteInactiveBig")),s&&(s.hasClass("showElement")&&(s.removeClass("showElement"),s.addClass("hideElement")),a.hasClass("hideElement")&&(a.removeClass("hideElement"),a.addClass("showElement"))),i&&i.hasClass("hideElement")&&(i.removeClass("hideElement"),i.addClass("showElement")),e.instanceID=jQuery("#instanceID").val(),e.language=jQuery("#language").val(),xajax_externalPPP(e)},this.showRegistrationError=function(e,t){var s=jQuery("#externalPPPRegistration"),a=jQuery("#registrationError"),i=jQuery("#registrationErrorMessage"),n=jQuery("#errorLayer");jQuery(".signup_errorHeader");switch(e){case"showError":null!=n.get(0)&&(externalPPP.busyLayer("show"),a.hasClass("hideElement")&&(a.removeClass("hideElement"),a.addClass("showElement")),i.html(jQuery(".signup_errorMessages").html()),n.html(""),n.addClass("hideElement"));break;case"closeError":"registration"==t?do_redirect(jQuery("#imgHost").val()):null!=n.get(0)&&(s&&s.hasClass("showElement")&&(externalPPP.busyLayer("hide"),s.removeClass("showElement"),s.addClass("hideElement"),s.css("z-index",10)),i.html(""),a.hasClass("showElement")&&(a.removeClass("showElement"),a.addClass("hideElement")));break;case"closeErrorOK":var r=jQuery("#imgHost").val();jQuery(".align_checkbox .error").removeClass("error"),jQuery(".align_checkbox .error .styled").removeClass("error"),jQuery(".signup_errorSuggestion")?(jQuery("#registrationError").removeClass("showElement"),jQuery("#registrationError").addClass("hideElement"),externalPPP.handleRegistration("register","externalPPPRegistration")):do_redirect(r)}},this.handleStatusMessage=function(e,t){jQuery("#"+e),jQuery("#"+t).css("display","none")},this.ajaxRequestSent=!1,this.resetAjaxRequestFlag=function(){this.ajaxRequestSent=!1},this.handleDetailInfo=function(e,t){if(!this.ajaxRequestSent){var s={},a=jQuery("#"+e+"Container"),i=jQuery("#"+e+"Tab"),n=jQuery("#"+e+"Label"),r=e+"Label";if(a&&"equipmentIn"!=e&&a.hasClass("showElement"))return jQuery("#mainInfo").hide("slow"),a.removeClass("showElement"),a.addClass("hideElement"),i.removeClass("infoTabsClicked"),i.addClass("infoTabsEffect"),n.removeClass(r+"Active"),void n.addClass(r+"InActive");if("block"==jQuery("#privacyError").css("display")&&jQuery("#privacyError").hide("slow"),jQuery.each(["userInfoTab","clanTab","equipmentTab","skilltreeTab"],function(){jQuery("#"+this).hasClass("infoTabsClicked")&&(jQuery("#"+this).removeClass("infoTabsClicked"),jQuery("#"+this).addClass("infoTabsEffect"))}),jQuery.each(["userInfoLabel","clanLabel","equipmentLabel","skilltreeLabel"],function(){jQuery("#"+this).hasClass(this+"Active")&&(jQuery("#"+this).removeClass(this+"Active"),jQuery("#"+this).addClass(this+"InActive"))}),i.removeClass("infoTabsEffect"),i.addClass("infoTabsClicked"),n.removeClass(r+"InActive"),n.addClass(r+"Active"),"equipment"==e||"equipmentIn"==e)switch(e="equipment",t){case 1:s.show="configBar1",s.hide="configBar2";break;case 2:s.show="configBar2",s.hide="configBar1"}jQuery("#mainInfo").hide("slow"),jQuery("#mainInfo").children(":first").removeClass("showElement"),jQuery("#mainInfo").children(":first").addClass("hideElement"),jQuery("#loadAnimation").show("slow"),s.type="checkPrivacySetting",s.tab=e,s.configId=t,s.sessionOwner=jQuery("#sessionOwner").val(),s.profileOwner=jQuery("#profileOwner").val(),s.instanceID=jQuery("#instanceID").val(),s.language=jQuery("#language").val(),s.baseHost=jQuery("#baseHost").val(),this.ajaxRequestSent=!0,xajax_externalPPP(s)}},this.showAccessForbidden=function(){jQuery("#mainInfo").hide("slow"),jQuery("#mainInfo").children(":first").removeClass("showElement"),jQuery("#mainInfo").children(":first").addClass("hideElement"),jQuery("#loadAnimation").hide("slow"),jQuery("#privacyError").show("slow"),jQuery("#privacyError").css("display","block")},this.repositionFooter=function(){var e=jQuery("#bottomSection");e&&(e.hasClass("bottomSectionRollOut")||e.addClass("bottomSectionRollOut"))},this.openShareContainer=function(e,t){var s=jQuery("#"+e);"show"==t?(externalPPP.busyLayer("show"),s&&s.hasClass("hideHeader")&&(s.removeClass("hideHeader"),s.addClass("showHeader"))):"hide"==t&&(externalPPP.busyLayer("hide"),s&&s.hasClass("showHeader")&&(s.removeClass("showHeader"),s.addClass("hideHeader")))},this.showInfoArea=function(){jQuery("#mainInfo").show("slow")},this.hideShowLoader=function(e){"show"==e?jQuery("#loadAnimation").show("slow"):"hide"==e&&jQuery("#loadAnimation").hide("slow")},this.toggleImprint=function(e){switch(e){case"show":jQuery("#imprintContainer").hasClass("hideElement")&&(externalPPP.busyLayer("show"),jQuery("#imprintContainer").removeClass("hideElement"),jQuery("#imprintContainer").addClass("showElement"));break;case"hide":jQuery("#imprintContainer").hasClass("showElement")&&(externalPPP.busyLayer("hide"),jQuery("#imprintContainer").removeClass("showElement"),jQuery("#imprintContainer").addClass("hideElement"))}}}var externalPPPAdvert=new PPPAdvert;function PPPAdvert(){this.breakingNewsInterval=!1,this.currentIconID=0,this.textSwitch=0,this.imageSwitch=0,this.titleSwitch=0,this.durationSwitch=0,this.maxIconID=0,this.ids=!1,this.keys=!1,this.textIcons=!1,this.images=!1,this.titles=!1,this.links=!1,this.durations=!1,this.language=!1,this.secondsCounter=0,this.titlePosition=12,this.setLanguage=function(e){this.language=e},this.setMaxIconID=function(e){this.maxIconID=e},this.setIds=function(e){this.ids=e},this.setKeys=function(e){this.keys=e},this.setTextIcons=function(e){this.textIcons=e},this.setImages=function(e){this.images=e},this.setTitles=function(e){this.titles=e},this.setLinks=function(e){this.links=e},this.setDurations=function(e){this.durations=e},this.advertCon=null,this.mainCon=null,this.textImg=null,this.imgCon=null,this.arrowDiv=null,this.leftArrow=null,this.rightArrow=null,this.init=function(){this.advertCon=jQuery("#externalPPPHeaderLeftAd"),this.mainCon=jQuery(document.createElement("div")).attr("id","mainCon").appendTo(this.advertCon),this.textImg=jQuery(document.createElement("img")).attr("id","textImg").appendTo(this.mainCon),this.imgCon=jQuery(document.createElement("img")).attr("id","imgCon").appendTo(this.mainCon),this.arrowDiv=jQuery(document.createElement("div")).attr("id","arrowDiv").addClass("hideElement").appendTo(this.mainCon),this.leftArrow=jQuery(document.createElement("div")).attr("id","leftArrow").appendTo(this.arrowDiv),this.rightArrow=jQuery(document.createElement("div")).attr("id","rightArrow").appendTo(this.arrowDiv)},this.switchInterval=null,this.start=function(){setInterval(function(){externalPPPAdvert.textImg.attr("src",externalPPPAdvert.textIcons[++externalPPPAdvert.textSwitch%externalPPPAdvert.maxIconID]),externalPPPAdvert.imgCon.attr("src",externalPPPAdvert.images[++externalPPPAdvert.imageSwitch%externalPPPAdvert.maxIconID]),externalPPPAdvert.imgCon.attr("title",externalPPPAdvert.titles[++externalPPPAdvert.titleSwitch%externalPPPAdvert.maxIconID])},externalPPPAdvert.durations[++externalPPPAdvert.durationSwitch%externalPPPAdvert.maxIconID])},this.showAdvert=function(){this.imgCon.attr("src","yes")},this.showArrows=function(){}}var misc=new Miscellaneous;function Miscellaneous(){this.initialiseScrollBar=function(){jQuery(".scroll-pane").jScrollPane({showArrows:!0})},this.testForScrollbar=function(e){if($(e)){var t=$(e).childElements();$(t[0]).hasClassName("scroll-innerBox")||Scroller.reset(e)}},this.testToolie=function(){},this.handleTooltip=function(e){var t=null,s=null;jQuery("."+e).each(function(){var e=this.id;"skill_23b"==e||"skill_21b"==e||"skill_16b"==e||"skill_15"==e?(t="leftMiddle",s="rightMiddle"):"skill_19"==e||"skill_22b"==e?(t="leftBottom",s="rightBottom"):"skill_1"==e||"skill_5"==e||"skill_5a"==e||"skill_5b"==e||"skill_6"==e||"skill_11"==e||"skill_20"==e||"skill_22a"==e?(t="rightBottom",s="leftBottom"):(t="rightMiddle",s="leftMiddle");var a=jQuery("#"+e+"_info").html();jQuery(this).qtip({content:a,position:{target:"mouse",corner:{target:t,tooltip:s},adjust:{mouse:!0}},style:{width:265,background:"none",border:"none"}})})},this.eventMouseOver=null,this.handleInviteButton=function(){$("social-invite-default-container").getElementsBySelector("span").observe("mouseover",function(){})},this.limitTextSize=function(e,t){e.value.length>t&&(e.value=e.value.substring(0,t))},this.createJsCssElement=function(e,t){var s;switch(t){case"js":(s=document.createElement("script")).setAttribute("type","text/javascript"),s.setAttribute("src",e);break;case"css":(s=document.createElement("link")).setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",e)}return s},this.replaceJsCssFile=function(e,t,s){var a,i,n;switch(s){case"js":a="src",i=$$("script");break;case"css":a="href",i=$$("link")}i.each(function(i){var r=$(i);r&&null!=r.getAttribute(a)&&-1!=r.getAttribute(a).indexOf(e)&&(n=misc.createJsCssElement(t,s),r.parentNode.replaceChild(n,r))})},this.addJsCssFile=function(e,t){var s,a;switch(t){case"js":"src",s=$$("script");break;case"css":"href",s=$$("link")}var i=$(s[0]);a=misc.createJsCssElement(e,t),i.parentNode.appendChild(a)},this.removeJsCssFile=function(e,t){var s,a;switch(t){case"js":s="src",a=$$("script");break;case"css":s="href",a=$$("link")}a.each(function(t){var a=$(t);a&&null!=a.getAttribute(s)&&-1!=a.getAttribute(s).indexOf(e)&&a.parentNode.removeChild(a)})},this.customScrollbar=function(){new Control.ScrollBar("scrollbar_content","scrollbar_track")},this.customScrollbarLog=function(){new Control.ScrollBar("scrollbar_content_logBook","scrollbar_track_logBook")}}function openExternal(e){window.open(e.replace(/\+/g,"%2B"),"paymentglobal","width=840,height=680,left=100,top=200").focus()}function schliessen(e){$(e).hide(),hideBusyLayer()}function checkKey(e){27==e&&($("infoPopup").style.display="block")&&($("infoPopup").style.display="none",hideBusyLayer())}function showMessageDeleteOtherQuests(e){alert(e)}function number_format(e,t,s,a){var i=e,n=t,r=s,o=a;i=isFinite(+i)?+i:0,n=isFinite(+n)?Math.abs(n):0,o=null==o?",":o;var l,u,d=i.toFixed(n),c=Math.abs(i).toFixed(n);return c>1e3?(u=(l=c.split(/\D/))[0].length%3||3,l[0]=d.slice(0,u+(i<0))+l[0].slice(u).replace(/(\d{3})/g,o+"$1"),d=l.join(r||".")):d=c.replace(".",s),d}function isChrome(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1}function showAchievementTooltip(e,t){var s=jQuery("#"+t).position();"general"==e&&(offsetLeft=65,offsetTop=15),toolTipElement=jQuery("#tooltip_"+t),toolTipElement.css({position:"absolute",top:s.top+offsetTop+"px",left:s.left+offsetLeft+"px"}),toolTipElement.show()}function hideAchievementTooltip(e){jQuery("#tooltip_"+e).hide()}function showUserInfo(e){xajax_loadUserInfo(e)}var hangarTooltipCache={},tooltipsLoading={};function showHangarInfo(e){void 0===hangarTooltipCache[e]?void 0!==tooltipsLoading[e]||(tooltipsLoading[e]=!0,xajax_loadHangarInfo(e)):hangarInfoLayerLoaded(e,hangarTooltipCache[e],!1)}function showClanInfo(e){xajax_loadClanInfo(e)}function hangarInfoLayerLoaded(e,t,s){var a=jQuery("#hangarInfoLayer");s=void 0===s||!0===s;void 0!==t&&(a.html(t),s&&(hangarTooltipCache[e]=t)),a.css({top:m.y-15+"px",left:m.x-150+"px"}),"hangarSlots"==a.attr("parent")?(jQuery("#switchActiveHangar").hide(),jQuery("#viewActiveHangar").show()):"header_hangar_slots"==a.attr("parent")&&(jQuery("#switchActiveHangar").show(),jQuery("#viewActiveHangar").hide())}var m={x:0,y:0};function executeDocumentReadyFunctions(){jQuery("*[showUser]").live("click",function(e){e&&(m.x=e.pageX,m.y=e.pageY),showUserInfo(jQuery(this).attr("showUser")),jQuery(".qtip-active").hide()}),"function"==typeof jQuery.livequery&&jQuery("*[showUser]").livequery(function(){var e=jQuery(this).find(".userInfoName").attr("title");""!=e&&(jQuery(this).qtip({content:e,style:"dohdr",position:{target:"mouse"}}),jQuery(this).find(".userInfoName").attr("title",""))}),jQuery("*[showHangarInfo]").live("mouseover",function(e){e&&(m.x=e.pageX,m.y=e.pageY),showHangarInfo(jQuery(this).attr("showHangarInfo")),jQuery("#hangarInfoLayer").attr("parent",jQuery(this).parent("div").attr("id"))}),jQuery("*[showClanInfo]").live("click",function(e){e&&(m.x=e.pageX,m.y=e.pageY),showClanInfo(jQuery(this).attr("showClanInfo")),jQuery("#clanInfoLayer").attr("parent",jQuery(this).parent("div").attr("id"))}),Tools.Popup.Initialize()}function gotoWriteMessage(e,t){e.constructor==Array&&(e=e.join("_")),typeID="user"==t?"recipientID":"clanID",do_redirect("indexInternal.es?action=internalMessaging&subaction=writeMessage&"+typeID+"="+e)}function userInfoLayerInvite(e){var t=jQuery("#userInfoButtonAddToFriends");t.attr("onclick","return false;"),t.addClass("userInfoFriendRequested"),t.css("cursor","default"),t.qtip("destroy"),jQuery(".qtip-active").hide(),pilotSheet.inviteAsFriend(e,"base")}function userInfoLayerLoad(e){jQuery("#userInfoUsername").attr("title",decodeURIComponent(e)),jQuery("#userInfoUsername").text(decodeURIComponent(e).substring(0,28)),jQuery("#userInfoButtonAddToFriends").qtip({content:header_ttips.userInfo_addFriend,style:"dohdr",position:{target:"mouse"}}),jQuery("#userInfoButtonSendMessage").qtip({content:header_ttips.userInfo_sendMessage,style:"dohdr",position:{target:"mouse"}}),jQuery("#userInfoButtonShowProfil").qtip({content:header_ttips.userInfo_showProfile,style:"dohdr",position:{target:"mouse"}}),jQuery(".userInfoFriendRequested").qtip("destroy"),jQuery("#userInfoLayer").css({top:m.y-15+"px",left:m.x-150+"px"}).show(),jQuery("#userInfoBox").delay(3e3).fadeOut()}function clanInfoLayerLoaded(e){jQuery("#clanInfoClanName").attr("title",decodeURIComponent(e)),jQuery("#clanInfoClanName").text(decodeURIComponent(e).substring(0,28)),jQuery("#clanInfoButtonApplyMembership").qtip({content:header_ttips.clanInfo_contactClan,style:"dohdr",position:{target:"mouse"}}),jQuery("#clanInfoLayer").css({top:m.y-15+"px",left:m.x-150+"px"}).show(),jQuery("#clanInfoBox").delay(3e3).fadeOut()}function updateServerTime(){var e=24;if(meridiem){e=13;"am"==meridiem?meridiem_text=meridiem_am:meridiem_text=meridiem_pm}minute++,minute>59&&(minute=0,hour++);var t=""+minute;1==t.length&&(t="0"+t),hour>e&&(meridiem?(hour=1,"am"==meridiem?meridiem_text=meridiem_pm:meridiem_text=meridiem_am):hour=0);var s=""+hour;1==s.length&&(s="0"+s),jQuery("#serverTime").text(s+":"+t),meridiem&&jQuery("#meridiem").text(meridiem_text)}"undefined"!=typeof jQuery&&jQuery(document).ready(function(){executeDocumentReadyFunctions()});var arenaHandler=new ArenaHandler;function ArenaHandler(){this.signup=function(e,t){var s=jQuery("#firstname").val();if(""!=s){jQuery("#firstname").removeClass("error");var a=jQuery("#lastname").val();""!=a?(jQuery("#lastname").removeClass("error"),jQuery("#tcs").attr("checked")?(jQuery("#tcsContainer").removeClass("error"),xajax_signupArena(e,t,s,a)):jQuery("#tcsContainer").addClass("error")):jQuery("#lastname").addClass("error")}else jQuery("#firstname").addClass("error")},this.success=function(){jQuery("#tcsContainer").hide(),jQuery("#button_signup").hide(),jQuery("#bn_text").hide(),jQuery("#bn_success").show(),jQuery("#button_main").show()},this.error=function(){jQuery("#tcsContainer").hide(),jQuery("#button_signup").hide(),jQuery("#bn_text").hide(),jQuery("#bn_error").show(),jQuery("#button_main").show()}}
var Tools={Initialize:function(){},addDefaultMouseEventBehaviour:function(e){e.live("mouseover",Tools.Events.General.onMouseOver),e.live("mouseout",Tools.Events.General.onMouseOut),e.live("mousedown",Tools.Events.General.onMouseDown),e.live("mouseup",Tools.Events.General.onMouseUp)},isNumeric:function(e){return!isNaN(e)||"number"==typeof e},Events:{General:{onMouseOver:function(e){jQuery(this).addClass("mouseOver")},onMouseOut:function(e){jQuery(this).removeClass("mouseDown").removeClass("mouseOver")},onMouseDown:function(e){jQuery(this).removeClass("mouseOver").addClass("mouseDown")},onMouseUp:function(e){jQuery(this).removeClass("mouseDown").addClass("mouseOver")}}}};Tools.Text={resources:{},Initialize:function(){},setResource:function(e,t){this.resources[e]=t},getResources:function(){return Tools.Text.resources},get:function(e){var t,o=Tools.Text.getResources();return void 0===o[e]?Tools.ErrorHandler.Events.onGeneralError('Unable to locate text for identifier "'+e+'".'):t=o[e],t},getWithReplacements:function(e,t){var o=Tools.Text.get(e);return jQuery.each(t,function(e,t){o=o.replace(e,t)}),o},getTextImageUrl:function(e){var t=void 0===(e=void 0===e?{}:e).textIdentifier?"title_error":e.textIdentifier,o=void 0===e.fontSize?12:e.fontSize,n=void 0===e.font?"eurostyle_thea":e.font,i=void 0===e.color?"white":e.color,s=void 0===e.backgroundColor?"grey":e.backgroundColor,l="undefined"==typeof User?"en":User.getLanguage();return"/do_img/global/text_tf.esg?s="+o+"&t="+t+"&f="+n+"&color="+i+"&bgcolor="+s+"&l="+(void 0===e.language?l:e.language)},getFormattedNumber:function(e){var t=Math.abs(e),o=Math.ceil(t)===e?0:(t+"").split(".")[1].length,n=isFinite(+t)?+t:0,i=isFinite(+o)?Math.abs(o):0,s=Tools.Text.get("thousands_separator"),l=Tools.Text.get("decimal_separator"),r=void 0===s?".":s,a=void 0===l?",":l,u="";return(u=(i?function(e,t){var o=Math.pow(10,t);return""+Math.round(e*o)/o}(n,i):""+Math.round(n)).split("."))[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(a)}};var textResourcesTitle={seo_title_client:"DarkOrbit",seo_title_client_blinking:"Darkorbit | Cliente del juego",seo_title_no_aid:"DarkOrbit Reloaded | MMO de accin espacial",seo_tittle_clans:"Darkorbit | Clanes",seo_tittle_pet:"Darkorbit | P.E.T.",seo_tittle_ships:"Darkorbit | Naves",seo_tittle_uridium:"Darkorbit | Uridium",seo_tittle_techfactory:"Darkorbit | Tecnofbrica",seo_tittle_hangar:"Darkorbit | Hangar",seo_title_standard:"DarkOrbit Reloaded | MMO de accin espacial",seo_title_achievements:"DarkOrbit | Logros",seo_title_shop:"DarkOrbit | Tienda",seo_title_skylab:"DarkOrbit | Skylab"};jQuery.each(textResourcesTitle,function(e,t){Tools.Text.setResource(e,t)}),Tools.Popup={library:null,callbacks:{onGreenButtonClick:null,onBlueButtonClick:null,onCloseButtonClick:null},Initialize:function(){this.library=new Storage,Tools.Popup.fetchObjects(),Tools.Popup.initializeEventListeners(),Tools.Popup.processPopupParameters()},fetchObjects:function(){var e=jQuery("#popup"),t=e.find(".header"),o=t.find(".button-close"),n=e.find(".body"),i=n.find(".icon"),s=n.find(".icon-question"),l=n.find(".icon-success"),r=n.find(".icon-error"),a=n.find(".content"),u=e.find(".footer"),c=u.find(".button"),d=u.find(".button-green"),h=d.find(".text"),p=u.find(".button-blue"),b=p.find(".text"),f=jQuery("#popup-modalBackground"),g=jQuery("#popup-loading");this.library.set("popup",e),this.library.set("header",t),this.library.set("btnClose",o),this.library.set("body",n),this.library.set("allIcons",i),this.library.set("iconQuestion",s),this.library.set("iconSuccess",l),this.library.set("iconError",r),this.library.set("content",a),this.library.set("footer",u),this.library.set("allButtons",c),this.library.set("btnGreen",d),this.library.set("btnGreenText",h),this.library.set("btnBlue",p),this.library.set("btnBlueText",b),this.library.set("modalBackground",f),this.library.set("loading",g)},initializeEventListeners:function(){var e=this.library.get("btnClose"),t=this.library.get("btnGreen"),o=this.library.get("btnBlue");Tools.addDefaultMouseEventBehaviour(e),e.live("click",Tools.Popup.Events.onBtnCloseClick),Tools.addDefaultMouseEventBehaviour(t),t.live("click",Tools.Popup.Events.onBtnGreenClick),Tools.addDefaultMouseEventBehaviour(o),o.live("click",Tools.Popup.Events.onBtnBlueClick)},processPopupParameters:function(){var e,t,o;void 0!==this.Parameters&&(void 0!==(e=this.Parameters).showOnLoad&&!0===e.showOnLoad)&&(t=void 0===e.type?"":e.type,this.setType(t),o=void 0===e.content?"":e.content,this.setContent(o),this.showSingleButton({}))},setType:function(e){switch(this.library.get("allIcons").hide(),e){case"question":this.library.get("iconQuestion").show();break;case"error":this.library.get("iconError").show();break;case"success":default:this.library.get("iconSuccess").show()}},setContent:function(e){this.library.get("content").html(e)},setCloseButtonCallback:function(e){this.callbacks.onCloseButtonClick=e},setGreenButtonCallback:function(e){this.callbacks.onGreenButtonClick=e},setBlueButtonCallback:function(e){this.callbacks.onBlueButtonClick=e},showSingleButton:function(e){this.setupBtnGreen(e),this.hideBtnBlue(),this.show()},showMultipleButtons:function(e,t){this.setupBtnGreen(e),this.setupBtnBlue(t),this.showBtnBlue(),this.show()},setupBtnGreen:function(e){var t=this.processBtnGreenArguments(e),o=Tools.Text.getTextImageUrl({textIdentifier:t.textIdentifier});this.library.get("btnGreenText").css("backgroundImage","url("+o+")"),this.setGreenButtonCallback(t.callback)},setupBtnBlue:function(e){var t=this.processBtnBlueArguments(e),o=Tools.Text.getTextImageUrl({textIdentifier:t.textIdentifier});this.library.get("btnBlueText").css("backgroundImage","url("+o+")"),this.setBlueButtonCallback(t.callback)},showBtnBlue:function(){this.library.get("btnBlue").show(),this.library.get("footer").removeClass("single-button")},hideBtnBlue:function(){this.library.get("btnBlue").hide(),this.library.get("footer").addClass("single-button")},processBtnGreenArguments:function(e){return{textIdentifier:void 0===e.textIdentifier?"ok":e.textIdentifier,callback:"function"!=typeof e.callback?"Tools.Popup.hide":e.callback}},processBtnBlueArguments:function(e){return{textIdentifier:void 0===e.textIdentifier?"confirmBox_cancel":e.textIdentifier,callback:"function"!=typeof e.callback?"Tools.Popup.hide":e.callback}},Presets:{showQuestionDialog:function(e,t,o){t=void 0===t?{}:t,o=void 0===o?{}:o;Tools.Popup.setType("question"),Tools.Popup.setContent(e),Tools.Popup.showMultipleButtons(t,o)},showSuccessDialog:function(e,t,o){t=void 0===t?{}:t;Tools.Popup.setType("success"),Tools.Popup.setContent(e),void 0===o?Tools.Popup.showSingleButton(t):Tools.Popup.showMultipleButtons(t,o)},showErrorDialog:function(e,t,o){t=void 0===t?{}:t;Tools.Popup.setType("error"),Tools.Popup.setContent(e),void 0===o?Tools.Popup.showSingleButton(t):Tools.Popup.showMultipleButtons(t,o)}},startListeningForKeyDownEvents:function(){jQuery("body").live("keydown",Tools.Popup.Events.onBodyKeyDown)},stopListeningForKeyDownEvents:function(){jQuery("body").die("keydown",Tools.Popup.Events.onBodyKeyDown)},show:function(){this.startListeningForKeyDownEvents(),this.library.get("loading").hide(),this.alignCenter(),this.library.get("popup").show(),this.showModalLayer()},hide:function(){this.stopListeningForKeyDownEvents(),this.library.get("popup").hide(),this.hideModalLayer()},resetCallbacks:function(){this.setGreenButtonCallback(null),this.setBlueButtonCallback(null),this.setCloseButtonCallback(null)},showModalLayer:function(){this.library.get("modalBackground").show()},hideModalLayer:function(){this.library.get("modalBackground").hide()},showLoadingDialog:function(){var e=this.library.get("loading");this.library.get("popup").hide(),this.alignCenter(e),e.show(),this.showModalLayer()},hideLoadingDialog:function(){this.library.get("loading").hide(),this.hideModalLayer()},alignCenter:function(e){e=void 0===e?this.library.get("popup"):e;var t=document.documentElement.offsetWidth/2-(e.width()+120)/2,o=document.documentElement.offsetHeight/2-e.height()/2;e.css({top:o+"px",left:t+"px"})},callBtnGreenCallback:function(){this.hide(),"function"==typeof this.callbacks.onGreenButtonClick&&this.callbacks.onGreenButtonClick(),Tools.Popup.Events.afterCallbackPerformed()},callBtnBlueCallback:function(){this.hide(),"function"==typeof this.callbacks.onBlueButtonClick&&this.callbacks.onBlueButtonClick(),Tools.Popup.Events.afterCallbackPerformed()},callBtnCloseCallback:function(){this.hide(),"function"==typeof this.callbacks.onCloseButtonClick&&this.callbacks.onCloseButtonClick(),Tools.Popup.Events.afterCallbackPerformed()},Events:{onBtnGreenClick:function(e){Tools.Popup.callBtnGreenCallback()},onBtnBlueClick:function(e){Tools.Popup.callBtnBlueCallback()},onBtnCloseClick:function(e){Tools.Popup.callBtnCloseCallback()},afterCallbackPerformed:function(){Tools.Popup.resetCallbacks()},onBodyKeyDown:function(e){27===e.keyCode&&Tools.Popup.callBtnCloseCallback()}}};var Library={storage:{},get:function(e){return Library.storage[e]},set:function(e,t){Library.storage[e]=t}},Storage=function(){this.storage={},this.get=function(e){return this.storage[e]},this.set=function(e,t){this.storage[e]=t}},InternalMapRevolution={library:null,windowSpacemap:null,windowWebPage:null,isBlinking:!1,intervalId:null,Initialize:function(){this.fetchElements(),this.initializeEventListeners()},fetchElements:function(){},initializeEventListeners:function(){},clearCurrentInterval:function(e){clearInterval(e),console.log("Auto cleanup... "+e,"title "+window.opener.document.title)},showFeedbackForm:function(){this.referToURL("internalStart.es&ff=on","seo_title_client",null,!0,null),window.opener.focus()},referToURL:function(e,t,o,n,i,s,l){if(e){var r="indexInternal.es";r+="?action="+e,r+=o?"&tpl="+o:"",r+=i?"&category="+i:"",r+=s?"&lootId="+s:""}var a=jQuery("#actionFile").val();if(0==l&&e!=a)return!1;switch(n){case!0:window.opener||document.isOpenSocial&&showGame(document.webHost+"/"+r+"&openSocial=1");case!1:window.opener?window.opener.location.href=r:document.isOpenSocial&&showGame(document.webHost+"/"+r+"&openSocial=1")}this.stopCurrentBlinking(),!t||"undefined"==t&&"null"==t||this.blinkHtmlTitle(t)},referOpenerToUrl:function(e){if(console.log("window.opener.name: "+window.opener.name),"do_webpage"==window.opener.name){if(null==this.windowWebPage)this.windowWebPage=window.open(e,"do_webpage"),(this.windowWebPage.location.pathname+this.windowWebPage.location.search).substr(1)!=e&&(this.windowWebPage.location.href=e);else if(this.windowWebPage.closed)this.windowWebPage=window.open(e,"do_webpage");else{(this.windowWebPage.location.pathname+this.windowWebPage.location.search).substr(1)!=e&&(this.windowWebPage.location.href=e)}this.windowWebPage.focus()}else window.opener.location.href=e,window.opener.focus()},closeChildWindow:function(e){window.opener?(e&&window.opener.location&&window.opener.location.reload(),window.close()):history.back()}};InternalMapRevolution.Initialize();